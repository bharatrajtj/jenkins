<h4>JenKins CICD Pipeline</h4>
1.	Create a large EC2 t2.large instance with 2CPU 8GB RAM![image](https://github.com/bharatrajtj/jenkins/assets/65009556/e11b2c9c-9fd8-4bc1-b397-c5fbe1d85647)

2.	Git clone the repository ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/4f28b8a5-d4ce-46b4-ae40-93d21c5e237c)

3.	Install Java, a pre requisite for Jenkins ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/b34fa375-6fe4-49d7-8337-ccb3d3c7a2c4)

4.	Run the jenkins install script ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/2c00f12e-3ab4-425e-a349-75a93802d1c9)
5.	Jenkins run HTTP on port 8080 ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/4bee4463-ff1e-44da-a677-344bf9fab98b)
6.	Configure inbound traffic rules in your EC2 instance to allow inbound traffic to the instance ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/53466bd6-740d-4db2-a6b7-a549a050607a)
7.	Cat /var/lib/jenkins/secrets/initialAdminPassword in your terminal to get the password  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/eded3630-ca9a-4ace-ae0a-0522ca704c3e)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/371944c5-1d88-43a5-87be-4b9fe047fec1)

8.	After installling the necessary plugins and finish you will reach the Jenkins Dashboard ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/70f4c720-a2ac-4856-b71b-dd4e76406e7e)
9.	Select New item to create Jenkins Pipeline and select Pipeline  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/e030dff5-bae0-43cb-8730-c91c303a310e)
10.	Select pipeline script from SCM. We are using Git as our Source Code Manager for this project. The repository URL is https://github.com/bharatrajtj/jenkins  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/accdf6a2-151d-4cb9-80b5-13d27d22b9cb)
11.	Script path is the path directory where the Jenkins file is located within the repository. The jenkinsfile and can be located in any path and jenkins file can be named as you wanted.  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/e7f41acd-4d52-4564-99b9-9f19a2948c66)
12. Go to Manage Jenkins > Plugins> Available plugins, search and install docker pipeline plugin to run docker as agents ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/7de58c54-9fe1-43b7-a8ef-7b9bf00311b4)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/03f98fce-4fb8-4f58-8fdd-9140aff59af3)
13. Go to Manage Jenkins > Plugins> Available plugins, search and install SonarQube Scanner for code quality inspection ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/f65561f7-4247-4b94-97cc-07e88bd1aa5c)
14.	Add new user named SonarQube in the EC2 instance and switch to the new user  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/bc592c0d-0a41-4eed-bdb9-1b9bae73dcb2)
15. Download the sonar zip file  wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-9.4.0.54424.zip ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/32c299f6-1d99-4664-ac17-da9d5801b271)
16.	Install apt install unzip to unzip your zip file in the root user ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/186c5fba-173e-4c98-b692-b02bff83c2d8)
17. Switch to sonarqube user and run unzip *  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/7f5bca6c-1dbd-4216-88b0-de39b22df09d)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/054900ff-e6a2-423b-83e2-0bffa90f3716)
18. Grant permission to the folders  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/151d4bfa-50f4-434c-aaa2-78f0ad1a4656)
19. Go to path depending upon your instance architecture  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/74a80248-a2b0-4917-ad2d-34cb0ea96185)
20. Run  ./sonar.sh start   to execute your SonarQube server ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/08ccc436-93dc-4fbc-8b4f-5d578f21de35)
21. SonarQube will run at port 9000, configure inbound rules to allow traffic from port 9000  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/c2d3315b-4c81-47a1-bec7-18d7fa19c386)
22. Enter ec2 IP address:9000 in browser to reach sonarqube server page. Default user name and password for Sonar Qube is admin ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/8de17d96-4c28-486c-90dd-848ac81a0e50)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/fb4934ea-7254-4f09-850e-b3ad1883bb72)
23.	In SonarQube page go to myAccount>Security and generate a token  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/2edddec0-fcf6-4125-89f2-cfe8a98a91b3)
24. In Jenkins Page go to ManageJenkins>Credentials>System>GlobalCredentials>AddCredentials ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/cb2c936c-7446-40a6-854c-d540e89cb843)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/2c94ed9d-5c00-4ff1-af09-3c0bb57fd8bb)
25. Install Docker in root user ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/b175b2c0-847d-486d-af65-f46ac4658141)
26.	 Grant Jenkins and Ubuntu user permission to access docker daemon and restart docker ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/0e81b9b1-c639-4a9f-8f60-730ab1ed3c6c)
27. Restart Jenkins to make sure the plugins installed will function properly. To restart jenkins after port number enter /restart  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/1b9c95e3-34bd-4008-9dd4-ebfb6d165f82)
28. Running Minikube on my windows local machine through docker container in powershell ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/c302de93-ce18-4818-a655-558236402c8e)
29. Installing ArgoCD operator to manage life cycle of Kubernetes controller – ArgoCD in minikube https://operatorhub.io/operator/argocd-operator-helm  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/e373454c-360a-4f15-ab10-bcab1ec04865)
30. Configure dockerhub and GIThub credentials to Jenkins ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/47df9fee-42f5-4659-9bd4-9feb08f70c67)
31. For GitHub go to Settings—personal access tokens—Generate New token (classic) and create the token ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/c8da0f2d-0334-403e-850d-dbef9a0e9b57)
32.	In Jenkins use secret text kind for github credential and restart Jenkins once credentials are created ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/e1b44ee0-99a3-404d-8bc7-9672beaa7128)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/7c4213f0-2562-4c23-9699-18cf374cae12)
33. Modified sonarqube IP address, docker repository and Github repository values in the source code and commit changes ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/2ea0eebd-e567-4ccf-ac31-fa4a64c242b8)
34. Build the Jenkins Pipeline ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/f6db60b9-be28-4c2c-92d2-4e0895aaa80e)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/88100159-10bd-42d2-bb3e-1aef5d3ca378)
35. SonarQube report for code analysis ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/aec1edfc-3d48-4dad-b9e7-f71c0d4f548e)
36. Docker registry where the image generated has been pushed ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/e1674fdb-555f-459e-b31d-cc901c27b9fe)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/552da718-6296-44e6-9760-e0bec810bc22)
37. Update the docker image name in the deployment yml ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/5a62ad40-f7ce-4499-a18a-763113000f90)
38. Create a yml file in your local machine and apply this content to install ArgoCD controller ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/3a4a8781-53e2-45a8-af85-2edd5260310c)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/d1b9cd53-3c98-418c-bc75-9482400e5dd7)
39.	Make sure the argocd operator pods are created ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/415b13fa-16bf-4f9e-b6aa-84db71fb889b)
40.	Edit the service type from Cluster IP to NodePort for example-argocd-server ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/e3c97a8b-2761-42e1-9630-c9a9274b7620)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/7e3fd1d6-c950-4db8-a2ef-2f2a058378b6)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/3f9fb450-5ad7-4464-9d29-7a31f58ec674)
41. Get URL to access the service through web ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/840e6811-2b2e-430e-8019-a8df5642751b)
42. Get the password to argocd account by getting into argocd-cluster secret ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/eb9d4519-1440-4101-8e9a-13f45ca92200)
43. Decode your base 64 encrypted secret ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/be31df09-75c9-471c-a532-7ba298e3c9f0)
44. Enter the credentials in ArgoCD web interface ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/659178d6-8d2f-4095-a030-df64d457d734)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/3b3c5365-1c34-4265-9d97-f004270a1dff)
45. Create application in argocd and configure required information  ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/f278854b-6a59-4087-91ec-5f0708bf42cf)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/a759b235-fe21-4fdc-880c-fac893cdacff)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/6aa03970-bf7e-46f7-a31d-485cf04eb0dc)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/cb2f6a9e-16fe-4f85-bbae-b43f6077d273)
46. The spring boot application has been deployed in our minikube cluster through argocd ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/15799f19-7565-4afc-a658-fd295478bb6d)
47. Edited the deployment image to nginx in the minikube ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/39a9a64d-bbf9-4316-a734-1740b76dd988)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/8845489b-21c0-433a-816b-f412ac28eeca)
48. ArgoCD recognize that the image in manifest yml is different from the image executing on minikube cluster it starts to rollback to image mentioned in the manifest ![image](https://github.com/bharatrajtj/jenkins/assets/65009556/88457b62-8b4d-4c03-a238-ef6ca342eba3)
![image](https://github.com/bharatrajtj/jenkins/assets/65009556/45571d9f-6ef1-419e-bee4-81e646db14f4)
